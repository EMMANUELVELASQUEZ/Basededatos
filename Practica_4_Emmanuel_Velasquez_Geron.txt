09/09/2024 REFERENCIADA 4

CREATE table partidas(
NUM_PARTIDAS INT,
FECHAINI DATE,
DURACION INT,
ID_TORNEO INT
);

CREATE TABLE TORNEOS (
ID_TORNEO INT,
NOM VARCHAR (30),
PERIODICIDAD VARCHAR(50),
FECHA_CREA DATE,
FECHAINI DATE,
CUANTIA INT,
GANADOR VARCHAR(30),
PAIS INT
);

CREATE TABLE MOVIMIENTOS (
ORDINAL  INT ,
CASILLA_ORIGEN INT,
CASILLA_DESTINO  INT,
NUM_PARTIDA INT
);

CREATE TABLE JUEGAN (

NUM_PARTIDA INT,
NUM_FEDERADO INT,
COLOR INT
);

CREATE TABLE FEDERACIONES(
PAIS INT,
ID_FEDERACION VARCHAR(30),
NOM VARCHAR (30),
TEL VARCHAR(10),
FECHA_FUND DATE,
PAIS_SUB INT,
ID_FEDERACION_SUB INT 
);


CREATE TABLE JUGADORES(
NUM_FEDERADO INT,
NOM VARCHAR(30),
APELLIDOS VARCHAR(20),
DIR_POSTAL VARCHAR (50),
DIR_ELECTROMICA VARCHAR(50),
PAIS INT,
ID_FEDERACION INT
);



---------------------------------------------------------------------------------------
 (PRIMARY KEY)
ALTER TABLE PARTIDAS ADD PRIMARY KEY (NUM_PARTIDAS);

ALTER TABLE TORNEOS ADD PRIMARY KEY (ID_TORNEO);

ALTER TABLE MOVIMIENTOS ADD PRIMARY KEY (ORDINAL);

ALTER TABLE JUEGAN ADD PRIMARY KEY (NUM_PARTIDA, NUM_FEDERADO);

ALTER TABLE FEDERACIONES ADD PRIMARY KEY (PAIS);

ALTER TABLE JUGADORES ADD PRIMARY KEY (NUM_FEDERADO);

------------------------------------------------------------------------------------------
(LLAVES FORANEAS)
ALTER TABLE PARTIDAS 
ADD CONSTRAINT FK_PARTIDAS_TORNEOS FOREIGN KEY (ID_TORNEO) REFERENCES TORNEOS(ID_TORNEO);

ALTER TABLE MOVIMIENTOS 
ADD CONSTRAINT FK_MOVIMIENTOS_PARTIDAS FOREIGN KEY (NUM_PARTIDA) REFERENCES PARTIDAS(NUM_PARTIDAS);

ALTER TABLE JUEGAN 
ADD CONSTRAINT FK_JUEGAN_PARTIDAS FOREIGN KEY (NUM_PARTIDA) REFERENCES PARTIDAS(NUM_PARTIDAS),
ADD CONSTRAINT FK_JUEGAN_JUGADORES FOREIGN KEY (NUM_FEDERADO) REFERENCES JUGADORES(NUM_FEDERADO);

ALTER TABLE TORNEOS 
ADD CONSTRAINT FK_TORNEOS_FEDERACIONES FOREIGN KEY (PAIS) REFERENCES FEDERACIONES(PAIS);

ALTER TABLE federaciones ADD CONSTRAINT FEDERACIONES_JUGADORES FOREIGN KEY (ID_FEDERACION_SUB) REFERENCES jugadores(NUM_FEDERADO) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE federaciones ADD CONSTRAINT federacion_fede FOREIGN KEY (ID_FEDERACION_SUB) REFERENCES federaciones(PAIS) ON DELETE RESTRICT ON UPDATE RESTRICT;
